<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deutsch mit Rawad · Lerne Deutsch</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- الخلفية المتحركة -->
    <div class="bg-animation">
        <div class="wave wave1"></div>
        <div class="wave wave2"></div>
        <div class="wave wave3"></div>
    </div>

    <!-- شريط التقدم -->
    <div class="progress-bar-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="container">
        <!-- الهيدر -->
        <header>
            <div class="logo">
                <i class="fas fa-gem logo-icon"></i>
                <span class="logo-text">Deutsch mit <span class="logo-highlight">Rawad</span></span>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <i class="fas fa-users stat-icon"></i>
                    <span id="visitorCount">-</span>
                </div>
                <div class="stat-item" id="authButtonContainer">
                    <button class="auth-btn" id="showLoginBtn">
                        <i class="fas fa-lock"></i> دخول
                    </button>
                    <button class="auth-btn" id="logoutBtn" style="display: none;">
                        <i class="fas fa-sign-out-alt"></i> خروج
                    </button>
                </div>
            </div>
        </header>

        <!-- نافذة تسجيل الدخول -->
        <div id="loginModal" style="display: none;">
            <div class="modal-content">
                <h3>دخول المشتركين</h3>
                <input type="text" id="loginUsername" placeholder="اسم المستخدم">
                <input type="password" id="loginPassword" placeholder="كلمة المرور">
                <div class="modal-buttons">
                    <button onclick="handleManualLogin()" class="btn-primary">دخول</button>
                    <button onclick="closeLoginModal()" class="btn-secondary">إلغاء</button>
                </div>
            </div>
        </div>

        <main>
            <!-- الصفحة الرئيسية -->
            <div id="heroSection">
                <div class="hero-content">
                    <h1>Deutsch lernen mit Rawad</h1>
                    <p>اختبارات قراءة وفهم مع تصحيح فوري</p>
                    
                    <!-- رسالة الترحيب للمشتركين -->
                    <div id="welcomeMessage" style="display: none;"></div>

                    <!-- بطاقات الأقسام -->
                    <div class="category-cards">
                        <div class="category-card" id="lesenCategory">
                            <i class="fas fa-book-open category-icon"></i>
                            <h3>Leseverstehen</h3>
                            <p>40+ قصة مقروءة</p>
                            <button class="btn-category" id="startLesenBtn">
                                ابدأ <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                        
                        <div class="category-card" id="hörenCategory">
                            <i class="fas fa-headphones category-icon"></i>
                            <h3>Hörverstehen</h3>
                            <p>32+ قصة مسموعة</p>
                            <button class="btn-category" id="startHörenBtn">
                                ابدأ <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- قسم القراءة -->
            <div id="lesenSection" style="display: none;">
                <div class="section-header">
                    <button class="back-btn" id="backToHomeFromLesen">
                        <i class="fas fa-arrow-right"></i> رجوع
                    </button>
                    <h2><i class="fas fa-book-open"></i> قصص القراءة</h2>
                </div>
                <div class="stories-grid" id="lesenStoriesGrid"></div>
            </div>

            <!-- قسم الاستماع -->
            <div id="hörenSection" style="display: none;">
                <div class="section-header">
                    <button class="back-btn" id="backToHomeFromHören">
                        <i class="fas fa-arrow-right"></i> رجوع
                    </button>
                    <h2><i class="fas fa-headphones"></i> قصص الاستماع</h2>
                </div>
                <div class="stories-grid" id="hörenStoriesGrid">
                    <div class="story-card coming-soon">
                        <i class="fas fa-clock"></i>
                        <h3>قريباً</h3>
                        <p>قصص الاستماع قيد التطوير</p>
                    </div>
                </div>
            </div>

            <!-- قسم الأسئلة -->
            <div id="questionsSection" style="display: none;">
                <div class="questions-header">
                    <button class="back-btn" id="backToStoriesBtn">
                        <i class="fas fa-arrow-right"></i> رجوع
                    </button>
                    <span id="currentCategoryBadge"></span>
                </div>

                <div class="story-info">
                    <h2 id="currentStoryTitle"></h2>
                    <span id="questionCounter">1/<span id="totalQuestions">0</span></span>
                </div>

                <!-- ملخص القصة -->
                <div id="summarySection" class="summary-section">
                    <div class="summary-tabs">
                        <button class="summary-btn active" data-lang="ar">عربي</button>
                        <button class="summary-btn" data-lang="de">Deutsch</button>
                    </div>
                    <div id="summaryContent" class="summary-content" dir="rtl"></div>
                </div>

                <!-- السؤال -->
                <div class="question-card">
                    <div class="question-text" id="questionTextContainer"></div>

                    <div class="options">
                        <button class="option-r" data-answer="R">
                            <i class="fas fa-check-circle"></i> Richtig (R)
                        </button>
                        <button class="option-f" data-answer="F">
                            <i class="fas fa-times-circle"></i> Falsch (F)
                        </button>
                    </div>

                    <!-- التغذية الراجعة -->
                    <div id="feedbackContainer" class="feedback-container" style="display: none;">
                        <span id="feedbackIcon"></span>
                        <span id="feedbackMessage"></span>
                    </div>

                    <!-- زر التالي -->
                    <div class="next-btn-container">
                        <button id="nextBtn" class="next-btn" disabled>
                            التالي <i class="fas fa-arrow-left"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- صفحة النتائج -->
            <div id="resultsSection" style="display: none;">
                <div class="results-card">
                    <i class="fas fa-trophy results-icon"></i>
                    <h2>النتيجة</h2>
                    <div id="statusBadge" class="status-badge"></div>
                    
                    <div class="score-circle">
                        <span id="finalScore">0</span>
                        <span>/<span id="finalTotal">0</span></span>
                    </div>

                    <div class="score-details">
                        <div><i class="fas fa-check-circle"></i> صحيح: <span id="correctCount">0</span></div>
                        <div><i class="fas fa-times-circle"></i> خطأ: <span id="wrongCount">0</span></div>
                        <div><i class="fas fa-star"></i> النقاط: <span id="pointsEarned">0</span></div>
                    </div>

                    <div class="results-actions">
                        <button id="tryAgainBtn" class="btn-primary">محاولة مرة أخرى</button>
                        <button id="moreStoriesBtn" class="btn-secondary">المزيد من القصص</button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>© 2026 Deutsch mit Rawad</p>
        </footer>
    </div>

    <!-- رسائل منبثقة -->
    <div id="toastNotification" class="toast-notification">
        <span id="toastMessage"></span>
    </div>

    <script src="script.js"></script>
</body>
</html>